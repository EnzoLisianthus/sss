local TweenService = game:GetService("TweenService")

local Library = {}

-- Helper: UI 생성기
local function Create(class, props)
    local inst = Instance.new(class)
    for i, v in pairs(props) do
        inst[i] = v
    end
    return inst
end

-- Helper: UI Corner 적용
local function AddUICorner(obj, radius)
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, radius or 8)
    corner.Parent = obj
end

-- Helper: UI Stroke 적용
local function AddUIStroke(obj, thickness)
    local stroke = Instance.new("UIStroke")
    stroke.Thickness = thickness or 1
    stroke.Color = Color3.fromRGB(60, 60, 60)
    stroke.Parent = obj
end

function Library:CreateWindow(title)
    local Player = game.Players.LocalPlayer
    local Gui = Create("ScreenGui", {
        Name = "SleekUILib",
        Parent = Player:WaitForChild("PlayerGui"),
        ResetOnSpawn = false,
    })

    local Main = Create("Frame", {
        Size = UDim2.new(0, 500, 0, 350),
        Position = UDim2.new(0.5, -250, 0.5, -175),
        BackgroundColor3 = Color3.fromRGB(30, 30, 30),
        BorderSizePixel = 0,
        Parent = Gui
    })
    AddUICorner(Main, 10)
    AddUIStroke(Main, 1)

    -- 드래그 지원
    local Drag = Instance.new("TextButton", Main)
    Drag.Size = UDim2.new(1, 0, 0, 30)
    Drag.BackgroundTransparency = 1
    Drag.Text = ""
    Drag.Active = true
    Drag.Draggable = true

    local Title = Create("TextLabel", {
        Size = UDim2.new(1, 0, 0, 30),
        BackgroundColor3 = Color3.fromRGB(20, 20, 20),
        Text = title or "Sleek UI",
        TextColor3 = Color3.fromRGB(255, 255, 255),
        Font = Enum.Font.GothamBold,
        TextSize = 16,
        Parent = Main
    })
    AddUICorner(Title, 10)

    local Tabs = Create("Frame", {
        Size = UDim2.new(0, 120, 1, -30),
        Position = UDim2.new(0, 0, 0, 30),
        BackgroundColor3 = Color3.fromRGB(25, 25, 25),
        Parent = Main
    })
    AddUICorner(Tabs, 8)

    local Pages = Create("Frame", {
        Size = UDim2.new(1, -130, 1, -40),
        Position = UDim2.new(0, 130, 0, 35),
        BackgroundTransparency = 1,
        Parent = Main
    })

    local TabButtons = {}
    local currentPage = nil

    function Library:CreateTab(name)
        local btn = Create("TextButton", {
            Size = UDim2.new(1, -10, 0, 30),
            BackgroundColor3 = Color3.fromRGB(35, 35, 35),
            Text = name,
            TextColor3 = Color3.new(1,1,1),
            Font = Enum.Font.Gotham,
            TextSize = 14,
            Parent = Tabs
        })
        AddUICorner(btn, 6)
        AddUIStroke(btn, 0.5)

        local page = Create("ScrollingFrame", {
            Size = UDim2.new(1, 0, 1, 0),
            CanvasSize = UDim2.new(0, 0, 0, 0),
            ScrollBarThickness = 4,
            Visible = false,
            BackgroundTransparency = 1,
            Parent = Pages
        })

        local layout = Instance.new("UIListLayout", page)
        layout.Padding = UDim.new(0, 6)
        layout.SortOrder = Enum.SortOrder.LayoutOrder

        table.insert(TabButtons, {Button = btn, Page = page})

        btn.MouseButton1Click:Connect(function()
            for _, tab in pairs(TabButtons) do
                tab.Page.Visible = false
            end
            page.Visible = true
        end)

        -- 기본 선택
        if not currentPage then
            page.Visible = true
            currentPage = page
        end

        return {
            AddButton = function(self, text, callback)
                local button = Create("TextButton", {
                    Size = UDim2.new(1, -10, 0, 32),
                    BackgroundColor3 = Color3.fromRGB(40, 40, 40),
                    Text = text,
                    TextColor3 = Color3.new(1,1,1),
                    Font = Enum.Font.Gotham,
                    TextSize = 14,
                    Parent = page
                })
                AddUICorner(button, 6)
                AddUIStroke(button, 1)

                button.MouseButton1Click:Connect(function()
                    callback()
                    -- 간단한 애니메이션
                    TweenService:Create(button, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(60, 60, 60)}):Play()
                    task.wait(0.2)
                    TweenService:Create(button, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(40, 40, 40)}):Play()
                end)
            end
        }
    end

    return Library
end

return Library
